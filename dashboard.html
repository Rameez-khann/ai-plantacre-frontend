<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Garden Dashboard</title>
    <style>
        :root {
            --primary-green: #2d5016;
            --secondary-green: #4a7c59;
            --accent-green: #7fb069;
            --light-green: #a7c957;
            --cream: #f2e8cf;
            --white: #ffffff;
            --text-dark: #2c3e50;
            --text-light: #7f8c8d;
            --shadow: rgba(0, 0, 0, 0.1);
            --shadow-hover: rgba(0, 0, 0, 0.15);
            --border-radius: 12px;
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        /* Dashboard-specific styles */
        .dashboard-header {
            background: linear-gradient(135deg, var(--primary-green) 0%, var(--secondary-green) 100%);
            color: var(--white);
            padding: 2rem 0;
            margin-bottom: 2rem;
            position: relative;
            overflow: hidden;
        }

        .dashboard-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='60' height='60' viewBox='0 0 60 60'%3E%3Cg fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E") repeat;
            opacity: 0.1;
        }

        .dashboard-title {
            position: relative;
            z-index: 1;
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .dashboard-subtitle {
            position: relative;
            z-index: 1;
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .plants-section {
            margin-bottom: 3rem;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }

        .section-title {
            font-size: 1.8rem;
            font-weight: 600;
            color: var(--primary-green);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .add-plant-btn {
            background: linear-gradient(135deg, var(--accent-green), var(--light-green));
            color: var(--white);
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: var(--border-radius);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .add-plant-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px var(--shadow-hover);
        }

        .plants-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 1.5rem;
        }

        .plant-card {
            background: var(--white);
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: 0 4px 12px var(--shadow);
            transition: var(--transition);
            position: relative;
            height: fit-content;
        }

        .plant-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 24px var(--shadow-hover);
        }

        .plant-card-inner {
            display: grid;
            grid-template-columns: 140px 1fr;
            gap: 0;
            height: 200px;
        }

        .plant-image-container {
            position: relative;
            overflow: hidden;
        }

        .plant-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .plant-badges {
            position: absolute;
            top: 0.75rem;
            right: 0.75rem;
            display: flex;
            gap: 0.25rem;
        }

        .badge {
            background: rgba(0, 0, 0, 0.7);
            color: var(--white);
            padding: 0.2rem 0.6rem;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: 600;
        }

        .badge.easy {
            background: rgba(76, 175, 80, 0.9);
        }

        .badge.medium {
            background: rgba(255, 193, 7, 0.9);
        }

        .badge.hard {
            background: rgba(244, 67, 54, 0.9);
        }

        .plant-actions {
            position: absolute;
            bottom: 0.75rem;
            left: 0.75rem;
            display: flex;
            gap: 0.25rem;
            opacity: 0;
            transition: var(--transition);
        }

        .plant-card:hover .plant-actions {
            opacity: 1;
        }

        .action-btn {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
        }

        .edit-btn {
            background: rgba(33, 150, 243, 0.9);
            color: var(--white);
        }

        .delete-btn {
            background: rgba(244, 67, 54, 0.9);
            color: var(--white);
        }

        .action-btn:hover {
            transform: scale(1.1);
        }

        .plant-content {
            padding: 1.25rem;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .plant-header {
            margin-bottom: 1rem;
        }

        .plant-name {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--primary-green);
            margin-bottom: 0.25rem;
            line-height: 1.2;
        }

        .scientific-name {
            font-style: italic;
            color: var(--text-light);
            font-size: 0.85rem;
        }

        .plant-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .stat-item {
            display: flex;
            align-items: center;
            gap: 0.4rem;
            font-size: 0.8rem;
        }

        .stat-icon {
            font-size: 0.9rem;
            flex-shrink: 0;
        }

        .stat-label {
            color: var(--text-light);
            min-width: 0;
        }

        .stat-value {
            font-weight: 600;
            color: var(--primary-green);
            margin-left: auto;
            font-size: 0.75rem;
            text-align: right;
            flex-shrink: 0;
        }

        .plant-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: auto;
        }

        .last-care {
            font-size: 0.7rem;
            color: var(--text-light);
            line-height: 1.3;
        }

        .view-btn {
            background: var(--primary-green);
            color: var(--white);
            border: none;
            padding: 0.4rem 0.8rem;
            border-radius: var(--border-radius);
            font-size: 0.75rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            flex-shrink: 0;
        }

        .view-btn:hover {
            background: var(--secondary-green);
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 2rem;
            margin-top: 2rem;
        }

        .stats-overview {
            background: var(--white);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            box-shadow: 0 4px 12px var(--shadow);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .stat-card {
            background: var(--cream);
            border-radius: var(--border-radius);
            padding: 1rem;
            text-align: center;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary-green);
            margin-bottom: 0.25rem;
        }

        .stat-text {
            font-size: 0.85rem;
            color: var(--text-light);
        }

        .actions-panel {
            background: var(--white);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            box-shadow: 0 4px 12px var(--shadow);
            position: sticky;
            top: 2rem;
            max-height: calc(100vh - 4rem);
            overflow-y: auto;
        }

        .action-list {
            max-height: 500px;
            overflow-y: auto;
        }

        .action-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            border-radius: var(--border-radius);
            margin-bottom: 0.75rem;
            transition: var(--transition);
            cursor: pointer;
        }

        .action-item.urgent {
            background: linear-gradient(135deg, #ffebee, #ffcdd2);
            border-left: 4px solid #f44336;
        }

        .action-item.today {
            background: linear-gradient(135deg, #fff3e0, #ffe0b2);
            border-left: 4px solid #ff9800;
        }

        .action-item.upcoming {
            background: linear-gradient(135deg, #f3e5f5, #e1bee7);
            border-left: 4px solid #9c27b0;
        }

        .action-item.completed {
            background: linear-gradient(135deg, #e8f5e8, #c8e6c9);
            border-left: 4px solid #4caf50;
            opacity: 0.7;
        }

        .action-item:hover:not(.completed) {
            transform: translateX(4px);
        }

        .action-icon {
            font-size: 1.5rem;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--white);
            flex-shrink: 0;
        }

        .action-content {
            flex: 1;
        }

        .action-title {
            font-weight: 600;
            margin-bottom: 0.25rem;
            color: var(--text-dark);
        }

        .action-plant {
            font-size: 0.85rem;
            color: var(--text-light);
            margin-bottom: 0.25rem;
        }

        .action-timing {
            font-size: 0.8rem;
            font-weight: 600;
        }

        .action-timing.overdue {
            color: #f44336;
        }

        .action-timing.today {
            color: #ff9800;
        }

        .action-timing.upcoming {
            color: #9c27b0;
        }

        .action-timing.completed {
            color: #4caf50;
        }

        .complete-btn {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            border: 2px solid var(--accent-green);
            background: transparent;
            cursor: pointer;
            transition: var(--transition);
            flex-shrink: 0;
        }

        .complete-btn.completed {
            background: var(--accent-green);
            position: relative;
        }

        .complete-btn.completed::after {
            content: '✓';
            color: var(--white);
            font-size: 0.7rem;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background-color: var(--white);
            margin: 5% auto;
            padding: 2rem;
            border-radius: var(--border-radius);
            width: 90%;
            max-width: 500px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
            animation: modalSlideIn 0.3s ease-out;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .close {
            color: var(--text-light);
            float: right;
            font-size: 1.5rem;
            font-weight: bold;
            cursor: pointer;
            margin-top: -0.5rem;
        }

        .close:hover {
            color: var(--text-dark);
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--primary-green);
        }

        .form-input,
        .form-select,
        .form-textarea {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #e9ecef;
            border-radius: var(--border-radius);
            font-size: 1rem;
            transition: var(--transition);
        }

        .form-input:focus,
        .form-select:focus,
        .form-textarea:focus {
            outline: none;
            border-color: var(--accent-green);
            box-shadow: 0 0 0 3px rgba(127, 176, 105, 0.1);
        }

        .form-textarea {
            resize: vertical;
            min-height: 80px;
        }

        .modal-actions {
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
            margin-top: 2rem;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: var(--border-radius);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }

        .btn-primary {
            background: var(--accent-green);
            color: var(--white);
        }

        .btn-primary:hover {
            background: var(--secondary-green);
        }

        .btn-secondary {
            background: #6c757d;
            color: var(--white);
        }

        .btn-secondary:hover {
            background: #5a6268;
        }

        .notification {
            position: fixed;
            top: 2rem;
            right: 2rem;
            background: var(--white);
            border-radius: var(--border-radius);
            padding: 1rem 1.5rem;
            box-shadow: 0 8px 24px var(--shadow-hover);
            z-index: 2000;
            min-width: 300px;
            animation: slideInRight 0.3s ease-out;
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(100%);
            }

            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .notification.success {
            border-left: 4px solid #4caf50;
        }

        .notification.error {
            border-left: 4px solid #f44336;
        }

        /* Plant health indicators */
        .health-indicator {
            position: absolute;
            top: 0.75rem;
            left: 0.75rem;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            box-shadow: 0 0 0 2px var(--white);
        }

        .health-indicator.excellent {
            background: #4caf50;
        }

        .health-indicator.good {
            background: #8bc34a;
        }

        .health-indicator.warning {
            background: #ff9800;
        }

        .health-indicator.poor {
            background: #f44336;
        }

        /* Pulse animation for urgent care */
        .urgent-pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(244, 67, 54, 0.7);
            }

            70% {
                box-shadow: 0 0 0 10px rgba(244, 67, 54, 0);
            }

            100% {
                box-shadow: 0 0 0 0 rgba(244, 67, 54, 0);
            }
        }

        @media (max-width: 1200px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
            }

            .actions-panel {
                position: static;
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 0 1rem;
            }

            .dashboard-title {
                font-size: 2rem;
            }

            .plants-grid {
                grid-template-columns: 1fr;
            }

            .plant-card-inner {
                grid-template-columns: 120px 1fr;
                height: 180px;
            }

            .section-header {
                flex-direction: column;
                gap: 1rem;
                align-items: stretch;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .modal-content {
                width: 95%;
                margin: 10% auto;
                padding: 1.5rem;
            }
        }

        @media (max-width: 500px) {
            .plant-card-inner {
                grid-template-columns: 1fr;
                height: auto;
            }

            .plant-image-container {
                height: 120px;
            }

            .plant-content {
                padding: 1rem;
            }
        }
    </style>
</head>

<body>
    <div class="page">
        <!-- Dashboard Header -->
        <div class="dashboard-header">
            <div class="container">
                <h1 class="dashboard-title">🌿 Garden Dashboard</h1>
                <p class="dashboard-subtitle">Monitor and care for your indoor plant collection</p>
                <div
                    style="background: rgba(255,255,255,0.1); padding: 1rem; border-radius: var(--border-radius); margin-top: 1rem; font-size: 0.9rem; opacity: 0.9;">
                    💡 <strong>Welcome to your plant dashboard!</strong> View all your plants at a glance, track their
                    care schedules, and never miss a watering or feeding again. Click on any plant to view detailed care
                    information.
                </div>
            </div>
        </div>

        <div class="container">
            <!-- Plants Section -->
            <div class="plants-section">
                <div class="section-header">
                    <div>
                        <h2 class="section-title">🪴 Your Plants</h2>
                        <p style="color: var(--text-light); margin: 0; font-size: 0.9rem;">Each card shows your plant's
                            care requirements and current status. Hover to see edit/delete options.</p>
                    </div>
                    <button class="add-plant-btn" onclick="addPlant()">
                        ➕ Add Indoor Plant
                    </button>
                </div>

                <div class="plants-grid" id="plantsGrid">
                    <!-- Plants will be dynamically generated here -->
                </div>
            </div>

            <!-- Dashboard Grid -->
            <div class="dashboard-grid">
                <!-- Stats Overview -->
                <div class="stats-overview">
                    <h2 class="section-title">📊 Garden Overview</h2>
                    <p style="color: var(--text-light); margin-bottom: 1.5rem; font-size: 0.9rem;">
                        Quick stats about your entire garden collection and overall health metrics.
                    </p>

                    <div class="stats-grid" id="statsGrid">
                        <!-- Stats will be dynamically updated -->
                    </div>

                    <div
                        style="background: var(--cream); padding: 1rem; border-radius: var(--border-radius); border-left: 4px solid var(--accent-green);">
                        <strong>💡 Garden Tip of the Day:</strong> <span id="gardenTip">Winter months require less
                            frequent watering. Check soil moisture before watering to prevent root rot.</span>
                    </div>
                </div>

                <!-- Actions Panel -->
                <div class="actions-panel">
                    <h2 class="section-title">📅 Care Schedule</h2>
                    <p style="color: var(--text-light); margin-bottom: 1.5rem; font-size: 0.9rem;">
                        All your plant care tasks organized by priority. Click the circle to mark tasks complete.
                    </p>

                    <div class="action-list" id="actionList">
                        <!-- Actions will be dynamically generated -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add/Edit Plant Modal -->
    <div id="plantModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h2 id="modalTitle">Add New Plant</h2>

            <form id="plantForm">
                <div class="form-group">
                    <label class="form-label" for="plantName">Plant Name</label>
                    <input type="text" id="plantName" class="form-input" required>
                </div>

                <div class="form-group">
                    <label class="form-label" for="scientificName">Scientific Name</label>
                    <input type="text" id="scientificName" class="form-input">
                </div>

                <div class="form-group">
                    <label class="form-label" for="plantImage">Image URL</label>
                    <input type="url" id="plantImage" class="form-input">
                </div>

                <div class="form-group">
                    <label class="form-label" for="careLevel">Care Difficulty</label>
                    <select id="careLevel" class="form-select" required>
                        <option value="easy">Easy</option>
                        <option value="medium">Medium</option>
                        <option value="hard">Hard</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label" for="lightRequirement">Light Requirement</label>
                    <select id="lightRequirement" class="form-select" required>
                        <option value="Low">Low</option>
                        <option value="Medium">Medium</option>
                        <option value="Bright">Bright</option>
                        <option value="Direct">Direct</option>
                        <option value="Any">Any</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label" for="wateringFreq">Watering Frequency (days)</label>
                    <input type="number" id="wateringFreq" class="form-input" min="1" max="60" required>
                </div>

                <div class="form-group">
                    <label class="form-label" for="waterVolume">Water Volume (ml)</label>
                    <input type="number" id="waterVolume" class="form-input" min="50" max="1000" required>
                </div>

                <div class="form-group">
                    <label class="form-label" for="fertilizingFreq">Fertilizing Frequency (days)</label>
                    <input type="number" id="fertilizingFreq" class="form-input" min="7" max="365" required>
                </div>

                <div class="form-group">
                    <label class="form-label" for="notes">Care Notes</label>
                    <textarea id="notes" class="form-textarea"
                        placeholder="Any special care instructions..."></textarea>
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save Plant</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Plant data structure
        let plants = [
            {
                id: 1,
                name: "Peace Lily",
                scientificName: "Spathiphyllum",
                image: "https://images.unsplash.com/photo-1416879595882-3373a0480b5b?w=400&h=200&fit=crop",
                careLevel: "easy",
                lightRequirement: "Medium",
                wateringFreq: 7,
                waterVolume: 200,
                fertilizingFreq: 14,
                lastWatered: new Date(Date.now() - 3 * 24 * 60 * 60 * 1000),
                lastFertilized: new Date(Date.now() - 8 * 24 * 60 * 60 * 1000),
                notes: "Enjoys humidity and filtered water"
            },
            {
                id: 2,
                name: "Monstera Deliciosa",
                scientificName: "Monstera deliciosa",
                image: "https://images.unsplash.com/photo-1614594975525-e45190c55d0b?w=400&h=200&fit=crop",
                careLevel: "medium",
                lightRequirement: "Bright",
                wateringFreq: 10,
                waterVolume: 300,
                fertilizingFreq: 21,
                lastWatered: new Date(Date.now() - 1 * 24 * 60 * 60 * 1000),
                lastFertilized: new Date(Date.now() - 12 * 24 * 60 * 60 * 1000),
                notes: "Loves to climb, provide moss pole"
            },
            {
                id: 3,
                name: "Snake Plant",
                scientificName: "Sansevieria trifasciata",
                image: "https://images.unsplash.com/photo-1593691509543-c55fb32d8de5?w=400&h=200&fit=crop",
                careLevel: "easy",
                lightRequirement: "Any",
                wateringFreq: 21,
                waterVolume: 150,
                fertilizingFreq: 60,
                lastWatered: new Date(Date.now() - 15 * 24 * 60 * 60 * 1000),
                lastFertilized: new Date(Date.now() - 45 * 24 * 60 * 60 * 1000),
                notes: "Very drought tolerant, avoid overwatering"
            },
            {
                id: 4,
                name: "Fiddle Leaf Fig",
                scientificName: "Ficus lyrata",
                image: "https://images.unsplash.com/photo-1586016286298-65b62d8b8595?w=400&h=200&fit=crop",
                careLevel: "hard",
                lightRequirement: "Bright",
                wateringFreq: 7,
                waterVolume: 400,
                fertilizingFreq: 14,
                lastWatered: new Date(Date.now() - 8 * 24 * 60 * 60 * 1000),
                lastFertilized: new Date(Date.now() - 10 * 24 * 60 * 60 * 1000),
                notes: "Sensitive to overwatering and changes in light"
            }
        ];

        let completedActions = [];
        let currentEditingId = null;

        // Garden tips array
        const gardenTips = [
            "Winter months require less frequent watering. Check soil moisture before watering to prevent root rot.",
            "Yellow leaves often indicate overwatering. Let soil dry between waterings.",
            "Rotate your plants weekly to ensure even growth and prevent leaning.",
            "Clean leaves monthly with a damp cloth to improve photosynthesis.",
            "Group plants with similar humidity needs together for better care.",
            "Use filtered or distilled water for sensitive plants like Peace Lilies.",
            "Check for pests weekly - early detection makes treatment easier.",
            "Fertilize less in winter when most plants enter dormancy.",
            "Place humidity-loving plants near each other to create a microclimate.",
            "Morning sunlight is gentler than harsh afternoon sun for most indoor plants."
        ];

        // Initialize the dashboard
        function init() {
            renderPlants();
            renderStats();
            renderActions();
            showRandomTip();
        }

        // Show random garden tip
        function showRandomTip() {
            const tipElement = document.getElementById('gardenTip');
            const randomTip = gardenTips[Math.floor(Math.random() * gardenTips.length)];
            tipElement.textContent = randomTip;
        }

        // Render plant cards
        function renderPlants() {
            const plantsGrid = document.getElementById('plantsGrid');
            plantsGrid.innerHTML = '';

            plants.forEach(plant => {
                const plantCard = createPlantCard(plant);
                plantsGrid.appendChild(plantCard);
            });
        }

        // Create individual plant card
        function createPlantCard(plant) {
            const card = document.createElement('div');
            card.className = 'plant-card';

            const daysSinceWatered = Math.floor((Date.now() - plant.lastWatered.getTime()) / (1000 * 60 * 60 * 24));
            const daysSinceFertilized = Math.floor((Date.now() - plant.lastFertilized.getTime()) / (1000 * 60 * 60 * 24));

            const needsWater = daysSinceWatered >= plant.wateringFreq;
            const needsFertilizer = daysSinceFertilized >= plant.fertilizingFreq;

            // Determine health indicator
            let healthClass = 'excellent';
            if (needsWater || needsFertilizer) {
                healthClass = 'warning';
            }
            if (daysSinceWatered > plant.wateringFreq + 3) {
                healthClass = 'poor';
            }

            const pulseClass = (needsWater && daysSinceWatered > plant.wateringFreq + 2) ? 'urgent-pulse' : '';

            card.innerHTML = `
                <div class="plant-card-inner">
                    <div class="plant-image-container">
                        <img src="${plant.image}" alt="${plant.name}" class="plant-image" 
                             onerror="this.src='https://images.unsplash.com/photo-1485955900006-10f4d324d411?w=400&h=200&fit=crop'">
                        <div class="health-indicator ${healthClass} ${pulseClass}"></div>
                        <div class="plant-badges">
                            <span class="badge ${plant.careLevel}">${plant.careLevel}</span>
                        </div>
                        <div class="plant-actions">
                            <button class="action-btn edit-btn" onclick="editPlant(${plant.id})" title="Edit Plant">✏️</button>
                            <button class="action-btn delete-btn" onclick="deletePlant(${plant.id})" title="Delete Plant">🗑️</button>
                        </div>
                    </div>
                    <div class="plant-content">
                        <div class="plant-header">
                            <div class="plant-name">${plant.name}</div>
                            <div class="scientific-name">${plant.scientificName}</div>
                        </div>
                        
                        <div class="plant-stats">
                            <div class="stat-item">
                                <span class="stat-icon">☀️</span>
                                <span class="stat-label">Light:</span>
                                <span class="stat-value">${plant.lightRequirement}</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-icon">💧</span>
                                <span class="stat-label">Water:</span>
                                <span class="stat-value">Every ${plant.wateringFreq}d</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-icon">🌱</span>
                                <span class="stat-label">Feed:</span>
                                <span class="stat-value">Every ${plant.fertilizingFreq}d</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-icon">💦</span>
                                <span class="stat-label">Amount:</span>
                                <span class="stat-value">${plant.waterVolume}ml</span>
                            </div>
                        </div>
                        
                        <div class="plant-footer">
                            <div class="last-care">
                                Last watered:<br>
                                <strong>${daysSinceWatered} days ago</strong>
                            </div>
                            <button class="view-btn" onclick="viewPlantDetails(${plant.id})">View Details</button>
                        </div>
                    </div>
                </div>
            `;

            return card;
        }

        // Render statistics
        function renderStats() {
            const statsGrid = document.getElementById('statsGrid');

            const totalPlants = plants.length;
            const easyPlants = plants.filter(p => p.careLevel === 'easy').length;
            const plantsNeedingWater = plants.filter(p => {
                const daysSinceWatered = Math.floor((Date.now() - p.lastWatered.getTime()) / (1000 * 60 * 60 * 24));
                return daysSinceWatered >= p.wateringFreq;
            }).length;
            const healthyPlants = plants.filter(p => {
                const daysSinceWatered = Math.floor((Date.now() - p.lastWatered.getTime()) / (1000 * 60 * 60 * 24));
                const daysSinceFertilized = Math.floor((Date.now() - p.lastFertilized.getTime()) / (1000 * 60 * 60 * 24));
                return daysSinceWatered < p.wateringFreq && daysSinceFertilized < p.fertilizingFreq;
            }).length;

            statsGrid.innerHTML = `
                <div class="stat-card">
                    <div class="stat-number">${totalPlants}</div>
                    <div class="stat-text">Total Plants</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">${healthyPlants}</div>
                    <div class="stat-text">Healthy Plants</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">${plantsNeedingWater}</div>
                    <div class="stat-text">Need Water</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">${easyPlants}</div>
                    <div class="stat-text">Easy Care</div>
                </div>
            `;
        }

        // Render care actions
        function renderActions() {
            const actionList = document.getElementById('actionList');
            const actions = [];

            plants.forEach(plant => {
                const daysSinceWatered = Math.floor((Date.now() - plant.lastWatered.getTime()) / (1000 * 60 * 60 * 24));
                const daysSinceFertilized = Math.floor((Date.now() - plant.lastFertilized.getTime()) / (1000 * 60 * 60 * 24));

                // Water action
                const waterActionId = `water-${plant.id}`;
                if (!completedActions.includes(waterActionId)) {
                    let waterUrgency = 'upcoming';
                    let waterTiming = `In ${plant.wateringFreq - daysSinceWatered} days`;

                    if (daysSinceWatered >= plant.wateringFreq) {
                        waterUrgency = daysSinceWatered > plant.wateringFreq + 2 ? 'urgent' : 'today';
                        waterTiming = daysSinceWatered > plant.wateringFreq ?
                            `${daysSinceWatered - plant.wateringFreq} days overdue` : 'Due today';
                    }

                    actions.push({
                        id: waterActionId,
                        plantId: plant.id,
                        type: 'water',
                        title: 'Water Plant',
                        plantName: plant.name,
                        urgency: waterUrgency,
                        timing: waterTiming,
                        priority: daysSinceWatered >= plant.wateringFreq ?
                            (daysSinceWatered > plant.wateringFreq + 2 ? 3 : 2) : 1
                    });
                }

                // Fertilizer action
                const fertilizerActionId = `fertilize-${plant.id}`;
                if (!completedActions.includes(fertilizerActionId)) {
                    let fertilizerUrgency = 'upcoming';
                    let fertilizerTiming = `In ${plant.fertilizingFreq - daysSinceFertilized} days`;

                    if (daysSinceFertilized >= plant.fertilizingFreq) {
                        fertilizerUrgency = 'today';
                        fertilizerTiming = `${daysSinceFertilized - plant.fertilizingFreq} days overdue`;
                    }

                    actions.push({
                        id: fertilizerActionId,
                        plantId: plant.id,
                        type: 'fertilize',
                        title: 'Fertilize Plant',
                        plantName: plant.name,
                        urgency: fertilizerUrgency,
                        timing: fertilizerTiming,
                        priority: daysSinceFertilized >= plant.fertilizingFreq ? 2 : 1
                    });
                }
            });

            // Sort by priority (urgent first)
            actions.sort((a, b) => b.priority - a.priority);

            // Add completed actions
            completedActions.forEach(actionId => {
                const [type, plantId] = actionId.split('-');
                const plant = plants.find(p => p.id === parseInt(plantId));
                if (plant) {
                    actions.push({
                        id: actionId,
                        plantId: plant.id,
                        type: type,
                        title: type === 'water' ? 'Water Plant' : 'Fertilize Plant',
                        plantName: plant.name,
                        urgency: 'completed',
                        timing: 'Completed today',
                        priority: 0
                    });
                }
            });

            actionList.innerHTML = actions.map(action => `
                <div class="action-item ${action.urgency}" onclick="toggleAction('${action.id}')">
                    <div class="action-icon">
                        ${action.type === 'water' ? '💧' : '🌱'}
                    </div>
                    <div class="action-content">
                        <div class="action-title">${action.title}</div>
                        <div class="action-plant">${action.plantName}</div>
                        <div class="action-timing ${action.urgency}">${action.timing}</div>
                    </div>
                    <button class="complete-btn ${action.urgency === 'completed' ? 'completed' : ''}" 
                            onclick="event.stopPropagation(); toggleAction('${action.id}')">
                    </button>
                </div>
            `).join('');
        }

        // Toggle action completion
        function toggleAction(actionId) {
            const index = completedActions.indexOf(actionId);
            if (index > -1) {
                completedActions.splice(index, 1);
            } else {
                completedActions.push(actionId);

                // Update last care date
                const [type, plantId] = actionId.split('-');
                const plant = plants.find(p => p.id === parseInt(plantId));
                if (plant) {
                    if (type === 'water') {
                        plant.lastWatered = new Date();
                    } else if (type === 'fertilize') {
                        plant.lastFertilized = new Date();
                    }
                    showNotification(`${plant.name} has been ${type === 'water' ? 'watered' : 'fertilized'}!`, 'success');
                }
            }

            renderPlants();
            renderStats();
            renderActions();
        }

        // Add new plant
        function addPlant() {
            currentEditingId = null;
            document.getElementById('modalTitle').textContent = 'Add New Plant';
            document.getElementById('plantForm').reset();
            document.getElementById('plantModal').style.display = 'block';
        }

        // Edit plant
        function editPlant(id) {
            const plant = plants.find(p => p.id === id);
            if (plant) {
                currentEditingId = id;
                document.getElementById('modalTitle').textContent = 'Edit Plant';
                document.getElementById('plantName').value = plant.name;
                document.getElementById('scientificName').value = plant.scientificName;
                document.getElementById('plantImage').value = plant.image;
                document.getElementById('careLevel').value = plant.careLevel;
                document.getElementById('lightRequirement').value = plant.lightRequirement;
                document.getElementById('wateringFreq').value = plant.wateringFreq;
                document.getElementById('waterVolume').value = plant.waterVolume;
                document.getElementById('fertilizingFreq').value = plant.fertilizingFreq;
                document.getElementById('notes').value = plant.notes || '';
                document.getElementById('plantModal').style.display = 'block';
            }
        }

        // Delete plant
        function deletePlant(id) {
            if (confirm('Are you sure you want to delete this plant?')) {
                plants = plants.filter(p => p.id !== id);
                // Remove related completed actions
                completedActions = completedActions.filter(actionId =>
                    !actionId.endsWith(`-${id}`)
                );
                renderPlants();
                renderStats();
                renderActions();
                showNotification('Plant deleted successfully', 'success');
            }
        }

        // View plant details (placeholder)
        function viewPlantDetails(id) {
            const plant = plants.find(p => p.id === id);
            if (plant) {
                alert(`${plant.name} Details:\n\nScientific Name: ${plant.scientificName}\nCare Level: ${plant.careLevel}\nLight: ${plant.lightRequirement}\nWatering: Every ${plant.wateringFreq} days\nFertilizing: Every ${plant.fertilizingFreq} days\n\nNotes: ${plant.notes || 'None'}`);
            }
        }

        // Close modal
        function closeModal() {
            document.getElementById('plantModal').style.display = 'none';
        }

        // Handle form submission
        document.getElementById('plantForm').addEventListener('submit', function (e) {
            e.preventDefault();

            const formData = {
                name: document.getElementById('plantName').value,
                scientificName: document.getElementById('scientificName').value,
                image: document.getElementById('plantImage').value || 'https://images.unsplash.com/photo-1485955900006-10f4d324d411?w=400&h=200&fit=crop',
                careLevel: document.getElementById('careLevel').value,
                lightRequirement: document.getElementById('lightRequirement').value,
                wateringFreq: parseInt(document.getElementById('wateringFreq').value),
                waterVolume: parseInt(document.getElementById('waterVolume').value),
                fertilizingFreq: parseInt(document.getElementById('fertilizingFreq').value),
                notes: document.getElementById('notes').value
            };

            if (currentEditingId) {
                // Edit existing plant
                const plant = plants.find(p => p.id === currentEditingId);
                Object.assign(plant, formData);
                showNotification('Plant updated successfully!', 'success');
            } else {
                // Add new plant
                const newPlant = {
                    id: Math.max(...plants.map(p => p.id), 0) + 1,
                    ...formData,
                    lastWatered: new Date(),
                    lastFertilized: new Date()
                };
                plants.push(newPlant);
                showNotification('Plant added successfully!', 'success');
            }

            closeModal();
            renderPlants();
            renderStats();
            renderActions();
        });

        // Show notification
        function showNotification(message, type) {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            document.body.appendChild(notification);

            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // Close modal when clicking outside
        window.onclick = function (event) {
            const modal = document.getElementById('plantModal');
            if (event.target === modal) {
                closeModal();
            }
        }

        // Initialize dashboard when page loads
        document.addEventListener('DOMContentLoaded', init);

        // Auto-refresh tips periodically
        setInterval(showRandomTip, 30000); // Change tip every 30 seconds
    </script>
</body>

</html>